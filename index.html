<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Parallax Video</title>
<link href="https://fonts.googleapis.com/css2?family=Jersey+10&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
<style>
  body, html {
    margin: 0;
    width: 100%;
    height: 100%;
    overflow-x: hidden;
    overflow-y: auto;
    background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
    cursor: default;
    perspective: 1100px;
    scroll-behavior: smooth;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  }

  /* Fullscreen video wrapper */
  .video-wrapper {
    position: fixed;
    inset: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    pointer-events: none; /* allow interactions to pass through */
    z-index: 0;
    transition: opacity 1s ease;
  }

  /* The video will use its intrinsic size (real pixels) and be centered; wrapper will crop slightly.
     A small scale is applied in JS when needed to ensure a slight crop and avoid tiny slivers. */
  #bg-video {
    position: absolute;
    top: 50%;
    left: 50%;
    width: auto; /* use intrinsic width */
    height: auto; /* keep aspect ratio */
    transform: translate(-50%, -50%) rotateX(0deg) rotateY(0deg) scale(1);
    transform-origin: center center;
    will-change: transform, filter, opacity;
    transition: opacity 1s ease; /* smooth fade when switching videos */
    z-index: 0;
    pointer-events: none;

    /* help the browser keep the video layer crisp during 3D transforms */
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform-style: preserve-3d;
    /* Use natural interpolation for photographic video to avoid sharpening artifacts */
    image-rendering: auto;
  }

  /* Use this for any content that should appear above the video */
  .content {
    position: relative;
    z-index: 2;
    margin-top: 90vh; /* reduced gap between homepage and info section */
    pointer-events: auto;
  }

  /* Info section hidden by default and revealed when the user scrolls */
  .info-section {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 650ms cubic-bezier(.2,.9,.2,1), transform 650ms cubic-bezier(.2,.9,.2,1);
    pointer-events: none;
    will-change: opacity, transform;
  }

  .info-section.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  /* Jersey font utility (fallback to sans-serif if not available) */
  .jersey-10-regular {
    font-family: "Jersey 10", sans-serif;
    font-weight: 400;
    font-style: normal;
  }



  /* Enhanced quick links bar */
  #quick-links {
    position: fixed;
    top: 14px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 12px;
    align-items: center;
    padding: 10px 16px;
    background: rgba(255, 255, 255, 0.12);
    color: #fff;
    border-radius: 999px;
    z-index: 6;
    backdrop-filter: blur(12px) saturate(1.8);
    -webkit-backdrop-filter: blur(12px) saturate(1.8);
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.1);
    pointer-events: auto;
    font-family: 'Segoe UI', system-ui, sans-serif;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  #quick-links:hover {
    background: rgba(255, 255, 255, 0.18);
    box-shadow: 
      0 12px 40px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transform: translateX(-50%) translateY(-2px);
  }
  #quick-links a {
    color: #fff;
    text-decoration: none;
    padding: 8px 14px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    opacity: 0.92;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }
  
  #quick-links a::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, rgba(255,255,255,0.2), rgba(255,255,255,0.05));
    transform: translateX(-100%);
    transition: transform 0.6s ease;
  }
  
  #quick-links a:hover::before {
    transform: translateX(0);
  }
  
  #quick-links a:hover {
    background: rgba(255,255,255,0.15);
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.2);
    opacity: 1;
  }
  
  #quick-links a.active {
    background: linear-gradient(135deg, rgba(255,255,255,0.25), rgba(255,255,255,0.1));
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    border: 1px solid rgba(255,255,255,0.2);
  }

  /* Enhanced sound toggle button */
  .sound-btn {
    appearance: none;
    -webkit-appearance: none;
    border: none;
    background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
    color: #fff;
    width: 42px;
    height: 42px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 
      0 4px 16px rgba(0,0,0,0.2),
      inset 0 1px 0 rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.1);
  }
  
  .sound-btn:hover {
    background: linear-gradient(145deg, rgba(255,255,255,0.25), rgba(255,255,255,0.1));
    transform: translateY(-3px) scale(1.05);
    box-shadow: 
      0 8px 24px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(255,255,255,0.15);
  }
  
  .sound-btn.on {
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    transform: translateY(-3px) scale(1.05);
    box-shadow: 
      0 8px 24px rgba(106, 17, 203, 0.4),
      inset 0 1px 0 rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.2);
  }
  
  .sound-btn:focus {
    outline: 2px solid rgba(255,255,255,0.3);
    outline-offset: 2px;
  }
  
  .sound-btn[aria-pressed="true"] {
    background: linear-gradient(135deg, #6a11cb, #2575fc);
  }

  /* Enhanced Nepal clock button */
  .clock-btn {
    appearance: none;
    -webkit-appearance: none;
    border: none;
    background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
    color: #fff;
    padding: 8px 14px;
    border-radius: 999px;
    display: inline-flex;
    gap: 10px;
    align-items: center;
    cursor: pointer;
    font-size: 15px;
    min-width: 72px;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 
      0 4px 16px rgba(0,0,0,0.2),
      inset 0 1px 0 rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.15);
  }
  
  .clock-btn:hover {
    background: linear-gradient(145deg, rgba(255,255,255,0.25), rgba(255,255,255,0.12));
    transform: translateY(-3px);
    box-shadow: 
      0 8px 24px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(255,255,255,0.15);
    border-color: rgba(255,255,255,0.25);
  }
  
  .clock-btn:focus {
    outline: 2px solid rgba(255,255,255,0.3);
    outline-offset: 2px;
  }
  
  .clock-btn .clock-time {
    font-variant-numeric: tabular-nums;
    font-weight: 600;
    font-size: 14px;
    letter-spacing: 0.5px;
  }

  /* Enhanced clock popover */
  .clock-pop {
    position: absolute;
    right: 18px;
    top: 60px;
    background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
    backdrop-filter: blur(20px) saturate(1.5);
    -webkit-backdrop-filter: blur(20px) saturate(1.5);
    padding: 16px;
    border-radius: 16px;
    box-shadow: 
      0 20px 50px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.15);
    border: 1px solid rgba(255,255,255,0.2);
    min-width: 280px;
    z-index: 80;
    display: inline-block;
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
  }
  
  .clock-pop:not([hidden]) {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
  }

  @media (max-width:520px) {
    .clock-pop { right: 50%; left: 50%; transform: translate(-50%,-6px) scale(0.99); width: calc(100% - 40px); min-width: unset; top: 64px; }
    .clock-pop:not([hidden]) { transform: translate(-50%,0) scale(1); }
  }

  .clock-pop-grid { display:flex; gap:12px; align-items:center; justify-content:space-between; }
  .clock-digital { flex:1 1 auto; text-align:left; padding-left:8px; }
  .clock-digital .big-time {
    font-size: 22px;
    font-weight: 700;
    letter-spacing: 1px;
    color: #fff;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    font-family: 'Courier New', monospace;
  }
  
  .clock-digital .tz {
    font-size: 13px;
    color: rgba(255,255,255,0.85);
    margin-top: 8px;
    font-weight: 500;
  }
  
  .clock-digital .clock-date {
    font-size: 13px;
    color: rgba(255,255,255,0.7);
    margin-top: 8px;
    font-style: italic;
  }

  .clock-analog { width:120px; height:120px; display:flex; align-items:center; justify-content:center; }
  #nepal-analog { width:120px; height:120px; border-radius:12px; box-shadow: 0 8px 20px rgba(0,0,0,0.45); background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); }

  .clock-pop .small-note { font-size:11px; color:rgba(255,255,255,0.55); margin-top:8px; }

  .clock-dot { width:8px;height:8px;background:linear-gradient(135deg,#ffb86b,#ff7aa2); border-radius:50%; box-shadow:0 6px 16px rgba(255,122,162,0.18); animation:pulse 1.6s infinite; }
  @keyframes pulse { 0%{ transform:scale(1); opacity:1 } 50%{ transform:scale(1.15); opacity:0.85 } 100%{ transform:scale(1); opacity:1 } }

  /* Enhanced Search UI */
  .search-wrapper { 
    position: relative; 
    display: inline-block; 
  }
  
  .search-btn { 
    appearance: none; 
    -webkit-appearance: none; 
    border: none; 
    background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
    color: #fff; 
    width: 42px; 
    height: 42px; 
    border-radius: 50%; 
    display: inline-flex; 
    align-items: center; 
    justify-content: center; 
    font-size: 18px; 
    cursor: pointer; 
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 
      0 4px 16px rgba(0,0,0,0.2),
      inset 0 1px 0 rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.15);
  }
  
  .search-btn:hover {
    background: linear-gradient(145deg, rgba(255,255,255,0.25), rgba(255,255,255,0.12));
    transform: translateY(-3px) scale(1.05);
    box-shadow: 
      0 8px 24px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(255,255,255,0.15);
  }
  
  .search-btn:focus { 
    outline: 2px solid rgba(255,255,255,0.3); 
    outline-offset: 2px; 
  }
  
  .search-popover { 
    position: absolute; 
    right: 0; 
    top: 50px; 
    background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
    border-radius: 12px; 
    padding: 16px; 
    min-width: 300px; 
    box-shadow: 
      0 20px 50px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.15);
    z-index: 12; 
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255,255,255,0.2);
  }
  
  .search-popover input[type="search"] { 
    width: 100%; 
    padding: 12px 14px; 
    border-radius: 8px; 
    border: 1px solid rgba(255,255,255,0.2); 
    background: rgba(255,255,255,0.1); 
    color: #fff; 
    font-size: 15px;
    transition: all 0.3s ease;
  }
  
  .search-popover input[type="search"]:focus {
    outline: none;
    border-color: rgba(255,255,255,0.4);
    background: rgba(255,255,255,0.15);
    box-shadow: 0 0 0 3px rgba(255,255,255,0.1);
  }
  
  .search-results { 
    list-style: none; 
    margin: 12px 0 0 0; 
    padding: 0; 
    max-height: 260px; 
    overflow: auto; 
  }
  
  .search-result-item { 
    padding: 12px; 
    border-radius: 8px; 
    cursor: pointer; 
    color: #fff; 
    transition: all 0.2s ease;
    margin-bottom: 6px;
  }
  
  .search-result-item:hover, 
  .search-result-item:focus { 
    background: rgba(255,255,255,0.15); 
    outline: none; 
    transform: translateX(5px);
  }
  
  .search-snippet { 
    font-size: 14px; 
    color: rgba(255,255,255,0.85); 
    margin-top: 6px; 
  }
  
  .search-empty { 
    font-size: 14px; 
    color: rgba(255,255,255,0.7); 
    margin-top: 12px; 
    text-align: center;
    font-style: italic;
  }
  
  mark { 
    background: linear-gradient(90deg, rgba(255,215,0,0.4), rgba(255,165,0,0.4)); 
    color: #fff; 
    padding: 0 4px; 
    border-radius: 3px; 
    font-weight: 600;
  }
  
  .search-highlight { 
    box-shadow: 
      0 12px 40px rgba(255,215,0,0.2),
      0 0 0 4px rgba(255,215,0,0.1);
    border-radius: 16px; 
    animation: highlightPulse 2s ease-in-out;
  }
  
  @keyframes highlightPulse {
    0% { box-shadow: 0 0 0 0 rgba(255,215,0,0.4); }
    70% { box-shadow: 0 12px 40px rgba(255,215,0,0.2), 0 0 0 10px rgba(255,215,0,0); }
    100% { box-shadow: 0 12px 40px rgba(255,215,0,0.2), 0 0 0 0 rgba(255,215,0,0); }
  }

  /* screen-reader only helper */
  .sr-only { position:absolute; width:1px; height:1px; padding:0;margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

  /* Status overlay for diagnostics */
  #video-status {
    position: absolute;
    left: 50%;
    top: 12px;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.6);
    color: #fff;
    padding: 8px 12px;
    border-radius: 6px;
    font-family: sans-serif;
    font-size: 13px;
    z-index: 3;
    display: none;
  }

  /* Credits overlay */
  #video-overlay {
    position: absolute;
    bottom: 20px;
    right: 20px;
    background: rgba(0,0,0,0.4);
    color: #fff;
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 14px;
    font-family: sans-serif;
    z-index: 4;
    display: block;
  }

  /* Enhanced info section */
  .info-section {
    position: relative;
    z-index: 2;
    padding: 100px 20px 80px;
    color: #fff;
    background: linear-gradient(to bottom, transparent, rgba(15, 12, 41, 0.8));
  }

  .info-section .info-text h2 {
    /* image clipped into the text for a masked / clipped-text look (preferred: background-clip; fallback: mask-image) */
    background-image: url('nepaltext.png');
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;

    /* fallback mask for browsers that support it */
    mask-image: url('nepaltext.png');
    -webkit-mask-image: url('nepaltext.png');
    mask-size: 0% 0%;
    -webkit-mask-size: 0% 0%;
    mask-position: center;
    -webkit-mask-position: center;
    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;

    /* start with the background clipped down and grow it when revealed */
    background-position: center;
    background-size: 0% 0%;
    background-repeat: no-repeat;

    font-size: 2.5rem;
    text-align: center;
    margin: 0 0 20px 0;
    padding: 20px;
    font-family: "Jersey 10", sans-serif;
    font-weight: 400;

    transition: mask-size 700ms cubic-bezier(.2,.9,.2,1), -webkit-mask-size 700ms cubic-bezier(.2,.9,.2,1), background-size 700ms cubic-bezier(.2,.9,.2,1), opacity 500ms ease;
    will-change: mask-size, background-size, opacity;
  }

  /* when the title is explicitly revealed (after showing the image), grow the mask/background */
  .info-section .info-text h2.revealed {
    mask-size: 100% 100%;
    -webkit-mask-size: 100% 100%;
    background-size: 100% 100%;
  }

  .info-container {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    padding: 40px;
    box-shadow: 
      0 20px 50px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    overflow: visible;
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.4s ease;
  }
  
  .info-container:hover {
    background: rgba(255, 255, 255, 0.12);
    box-shadow: 
      0 25px 60px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
    transform: translateY(-5px);
  }

  /* Montserrat utility classes (pattern: .montserrat-<weight>) */
  .montserrat-400, .montserrat-500, .montserrat-600, .montserrat-700, .montserrat-800 {
    font-family: "Montserrat", sans-serif;
    font-optical-sizing: auto;
    font-style: normal;
  }

  .montserrat-800 {
    font-weight: 800;
    font-size: 1.2rem;
    letter-spacing: 0.8px;
    background: linear-gradient(90deg, #ff7e5f, #feb47b, #ff7e5f);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 10px 20px rgba(255, 126, 95, 0.3);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }
  
  .montserrat-800::after {
    content: "";
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, #ff7e5f, #feb47b);
    border-radius: 2px;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
  }
  
  .montserrat-800:hover::after {
    transform: scaleX(1);
  }

  .montserrat-700 {
    font-weight: 700;
    font-size: 1.1rem;
    color: #fff;
    letter-spacing: 0.4px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
  }
  
  .montserrat-700:hover {
    color: #ffb86b;
    text-shadow: 0 2px 8px rgba(255, 184, 107, 0.4);
  }

  .montserrat-600 {
    font-weight: 600;
    font-size: 0.98rem;
    color: rgba(255,255,255,0.95);
  }

  .montserrat-400 {
    font-weight: 400;
    font-size: 0.92rem;
    color: rgba(255,255,255,0.74);
    font-style: italic;
  }

  /* Lora description style for place paragraphs */
  .lora-400 {
    font-family: "Lora", serif;
    font-weight: 400;
    font-size: 1.05rem;
    color: rgba(255,255,255,0.95);
    line-height: 1.75;
    letter-spacing: 0.2px;
    white-space: normal;
    overflow-wrap: break-word;
    word-break: break-word;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
  }
  
  .lora-400:hover {
    color: rgba(255,255,255,1);
  }

  .place-desc { margin-top: 8px; }


  /* Places list styling: horizontal slider and polished cards */
  .places-list {
    display: flex;
    gap: 18px;
    margin-top: 18px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 8px; /* leave space for scrollbar */
  }

  .places-list::-webkit-scrollbar { height: 10px; }
  .places-list::-webkit-scrollbar-track { background: transparent; }
  .places-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); border-radius: 999px; }

  .place {
    position: relative;
    flex: 0 0 360px;
    scroll-snap-align: start;
    background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
    border: 1px solid rgba(255,255,255,0.15);
    padding: 20px;
    border-radius: 16px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 
      0 10px 30px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(255,255,255,0.1);
    display: block;
    overflow: hidden;
    box-sizing: border-box;
    word-break: break-word;
    hyphens: auto;
    backdrop-filter: blur(10px);
  }
  
  .place::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
    border-radius: 16px;
    pointer-events: none;
  }
  
  .place:hover::after {
    opacity: 1;
  }

  .place-img { width:100%; height:180px; object-fit:cover; border-radius:8px; display:block; margin-bottom:12px; box-shadow: 0 8px 24px rgba(0,0,0,0.45); }

  .place::before {
    content: "";
    position: absolute;
    left: 12px;
    top: 16px;
    width: 6px;
    height: 44px;
    border-radius: 6px;
    background: linear-gradient(180deg,#ffb86b,#ff7aa2);
    box-shadow: 0 6px 18px rgba(255,122,162,0.06);
  }

  .place:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 
      0 20px 50px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.2);
    border-color: rgba(255,255,255,0.25);
  }

  .place h4 { margin: 0 0 8px 0; }
  .place .img-note { margin-top: 12px; color: rgba(255,255,255,0.65); font-size: 0.9rem; }

  @media (max-width:760px) {
    .places-list { gap: 12px; padding-bottom: 6px; }
    .place { flex: 0 0 92%; }
    .montserrat-800 { font-size: 1.02rem; }
  }

  /* Homepage banner that sits within the homepage (video area) and hides when the info section becomes visible */
  .homepage-banner {
    position: absolute;
    left: 50%;
    transform: translateX(-50%) translateY(0);
    top: 55vh; /* place in lower-middle of viewport to avoid bottom clipping */
    width: min(calc(100% - 120px), 960px);
    height: 220px; /* slightly larger for visual impact */
    border-radius: 10px;
    overflow: hidden;
    z-index: 15; /* above controls and overlays */
    display: block;
    pointer-events: none;
    opacity: 0;
    transform-origin: center center;
    transform: translateX(-50%) translateY(6px);
    transition: opacity 380ms ease, transform 380ms ease, filter 320ms ease;
    box-shadow: 0 18px 48px rgba(0,0,0,0.6);
    backdrop-filter: saturate(1.05) blur(2px);
  }
  .homepage-banner img { width: 100%; height: 100%; object-fit: cover; display:block; }
  .homepage-banner.visible { opacity: 1; transform: translateX(-50%) translateY(0); }

  /* Make banner smaller on small screens */
  @media (max-width: 760px) {
    .homepage-banner { width: calc(100% - 64px); height: 140px; top: 58vh; border-radius: 8px; }
  }

  /* Chat Icon */
  /* Slightly lower for very short viewports so it doesn't overlap the quick links */
  @media (max-height: 650px) {
    .homepage-banner { top: 48vh; }
  }

  /* Enhanced info rows with better animations */
  .info-row {
    display: flex;
    gap: 32px;
    align-items: center;
    margin-bottom: 40px;
    opacity: 0;
    transform: translateY(20px);
    transition: 
      opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1),
      transform 0.8s cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 0.4s ease;
    will-change: opacity, transform;
    padding: 24px;
    border-radius: 16px;
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255,255,255,0.1);
  }

  .info-row.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .info-row:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 
      0 20px 40px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.15);
    background: rgba(255,255,255,0.08);
    border-color: rgba(255,255,255,0.2);
  }

  .info-text {
    flex: 1 1 60%;
    font-size: 16px;
    line-height: 1.6;
  }

  .info-media {
    flex: 0 0 320px;
  }

  .info-img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 12px;
    object-fit: cover;
    box-shadow: 
      0 12px 30px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.1);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
    border: 1px solid rgba(255,255,255,0.1);
  }

  .info-img:hover {
    transform: scale(1.05);
    box-shadow: 
      0 20px 40px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(255,255,255,0.2);
    border-color: rgba(255,255,255,0.2);
  }

  /* Subtle looping blur animation on the video for a slightly dreamy effect (reduced so it doesn't introduce visible softness) */
  @keyframes subtleBlur {
    0% { filter: blur(0px) saturate(1) brightness(1); }
    50% { filter: blur(0.25px) saturate(1.01) brightness(0.995); }
    100% { filter: blur(0px) saturate(1) brightness(1); }
  }

  #bg-video, #bg-video2, #bg-video3, #bg-video4 {
    /* existing properties kept above; add animation */
    animation: subtleBlur 8s ease-in-out infinite;
    will-change: transform, filter;
  }

  /* When content is visible, slightly blur & dim the video for contrast */
  .video-wrapper.blurred {
    filter: blur(2px) brightness(0.82);
    transition: filter 600ms ease;
    will-change: filter;
  }

  @media (max-width: 760px) {
    .info-row { flex-direction: column; }
    .info-media { width: 100%; }
  }

  /* Provinces section styles */
  .nepal-map {
    margin-bottom: 20px;
    text-align: center;
  }

  .nepal-map-img {
    width: 100%;
    max-width: 600px;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.45);
  }

  .provinces-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .province {
    display: flex;
    gap: 24px;
    align-items: center;
    padding: 24px;
    background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 16px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 
      0 10px 30px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
  }

  .province:hover {
    transform: translateY(-8px) scale(1.01);
    box-shadow: 
      0 20px 50px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.2);
    border-color: rgba(255,255,255,0.25);
    background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
  }

  .province-text {
    flex: 1;
  }

  .province-media {
    flex: 0 0 200px;
  }

  .province-img {
    width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.45);
  }

  @media (max-width: 760px) {
    .province { flex-direction: column; gap: 16px; }
    .province-media { width: 100%; }
  }
</style>
  /* Decorative floating particles */
  .particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
  }
  
  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    animation: float 15s infinite linear;
  }
  
  @keyframes float {
    0% {
      transform: translateY(100vh) translateX(0);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateY(-100px) translateX(20px);
      opacity: 0;
    }
  }
  
  /* Scroll indicator */
  .scroll-indicator {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 5;
    opacity: 0.8;
    transition: opacity 0.3s ease;
  }
  
  .scroll-indicator:hover {
    opacity: 1;
  }
  
  .scroll-text {
    color: rgba(255, 255, 255, 0.8);
    font-size: 14px;
    margin-bottom: 10px;
    font-weight: 500;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  
  .scroll-arrow {
    width: 24px;
    height: 24px;
    border: 2px solid rgba(255, 255, 255, 0.7);
    border-left: none;
    border-top: none;
    transform: rotate(45deg);
    animation: bounce 2s infinite;
  }
  
  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: rotate(45deg) translateY(0);
    }
    40% {
      transform: rotate(45deg) translateY(-10px);
    }
    60% {
      transform: rotate(45deg) translateY(-5px);
    }
  }
  
  /* Gradient text effects */
  .gradient-text {
    background: linear-gradient(90deg, #ff7e5f, #feb47b, #ff7e5f);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    background-size: 200% auto;
    animation: gradientShift 3s linear infinite;
  }
  
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
  }
  
  /* Loading spinner */
  .loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: #ff7e5f;
    animation: spin 1s ease-in-out infinite;
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
</style>
</head>
<body>

<!-- Decorative floating particles -->
<div class="particles" id="particles"></div>

<!-- Scroll indicator -->
<div class="scroll-indicator">
  <div class="scroll-text">Scroll Down</div>
  <div class="scroll-arrow"></div>
</div>

<div class="video-wrapper">
  <!-- Single video -->
  <video id="bg-video" autoplay muted playsinline preload="auto" loop style="opacity:1">
    <source src="video.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <div id="video-status" aria-live="polite">Loading video‚Ä¶</div>
  <div id="video-overlay" style="background: linear-gradient(135deg, rgba(0,0,0,0.6), rgba(106,17,203,0.3)); backdrop-filter: blur(10px); border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); padding: 10px 15px; font-weight: 500;">üé• Credits to Nepal Tourism Board</div>
</div>

<!-- Quick navigation links (jump to info sections) -->
<nav id="quick-links" class="jersey-10-regular" aria-label="Quick links">
  <a href="#info-1">Overview</a>
  <a href="#info-2">Culture</a>
  <a href="#info-3">Outdoors</a>
  <a href="#provinces">Provinces</a>

  <!-- Search UI (toggle + popover) -->
  <div class="search-wrapper">
    <button id="search-toggle" class="search-btn" aria-expanded="false" aria-controls="search-popover" aria-label="Search topics" title="Search topics">üîç</button>
    <div id="search-popover" class="search-popover" hidden>
      <input id="search-input" type="search" placeholder="Search topics..." aria-label="Search topics" autocomplete="off" />
      <ul id="search-results" class="search-results" role="listbox" tabindex="-1" aria-label="Search results"></ul>
      <div id="search-empty" class="search-empty" hidden>No results</div>
    </div>
  </div>

    <!-- Nepal time quick link & clock -->
    <button id="nepal-btn" class="clock-btn" aria-expanded="false" title="Show Nepal time" aria-controls="nepal-clock-pop">
      üïí <span class="clock-time">--:--</span>
    </button>
    <div id="nepal-clock-pop" class="clock-pop" hidden>
      <div class="clock-pop-grid">
        <div class="clock-digital">
          <div class="big-time" id="nepal-clock-time">--:--:--</div>
          <div class="tz">Kathmandu ¬∑ NPT (UTC+5:45)</div>
          <div class="clock-date" id="nepal-clock-date"></div>
        </div>

        <div class="clock-analog" aria-hidden="false">
          <canvas id="nepal-analog" width="120" height="120" aria-label="Analog clock"></canvas>
        </div>
      </div>
    </div>

    <!-- Small sound toggle button -->
    <button id="sound-toggle" class="sound-btn" aria-pressed="false" aria-label="Toggle sound" title="Toggle sound">üîà</button>
  </nav>

  <!-- Enhanced Nishant text -->
  <div class="jersey-10-regular gradient-text" style="position: fixed; right: 20px; top: 50%; transform: translateY(-50%); font-size: 28px; z-index: 10; writing-mode: vertical-rl; text-orientation: mixed; letter-spacing: 2px; text-shadow: 0 0 10px rgba(255, 126, 95, 0.5);">NISHANT</div>

  <!-- Main scrollable content below the homepage -->
  <main class="content">
    <section class="info-section">
      <div class="info-container">


      <!-- Info item 1 -->
      <div class="info-row" id="info-1">
        <div class="info-text">
          <h2 class="gradient-text">Discover Nepal</h2>
          <p>Nepal is a Himalayan country in South Asia, home to Mount Everest ‚Äî the highest peak on Earth. It has a rich cultural heritage, diverse ethnic groups, and a long tradition of mountain tourism and trekking.</p>
          <p>Capital: Kathmandu. Languages: Nepali and many regional languages. Known for beautiful landscapes, temples, and friendly hospitality.</p>
        </div>
        <div class="info-media">
          <!-- Add an image link here (example: paste Google image URL). Replace the src value with your image URL -->
          <img class="info-img" src="https://tse2.mm.bing.net/th/id/OIP._UNasqmNY5xyWu98GiyupAHaFM?rs=1&pid=ImgDetMain&o=7&rm=3" alt="Nepal image" loading="lazy">
        </div>
      </div>

      <!-- Info item 2 -->
      <div class="info-row" id="info-2">
        <div class="info-text">
          <h3>Culture & Festivals</h3>
          <p>Nepal celebrates many festivals such as Dashain and Tihar, which include family gatherings, rituals, and traditional music. Religious diversity includes Hinduism and Buddhism, with many historic temples and monasteries.</p>
        </div>
        <div class="info-media">
          <!-- Optional second image link: replace src with a Google image URL -->
          <img class="info-img" src="https://th.bing.com/th/id/OIP.nDmRWmh-NzqeIrKxp6d8-wHaDj?w=289&h=180&c=7&r=0&o=7&pid=1.7&rm=3" alt="Nepal festival image" loading="lazy">
        </div>
      </div>

      <!-- Info item 3 -->
      <div class="info-row" id="info-3">
        <div class="info-text">
          <h3>Outdoor Activities</h3>
          <p>Popular activities include trekking (e.g., Annapurna Circuit), mountaineering, white-water rafting, and wildlife safaris. The country offers a wide range of experiences for outdoor enthusiasts.</p>
        </div>
        <div class="info-media">
          <!-- Optional third image link: replace src with a Google image URL -->
          <img class="info-img" src="data:image/webp;base64,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" alt="Nepal outdoors image">
        </div>
      </div>

      <!-- Top places to visit -->
      <div class="info-row" id="top-places">
        <div class="info-text">
          <h3>Top places to visit</h3>

          <div class="places-list">
            <div class="place">
              <img class="place-img" src="top_places/kathmandu.jpg" alt="Kathmandu Valley image" loading="lazy">
              <h4 class="montserrat-800">Kathmandu Valley</h4>
              <p class="place-desc lora-400">The Kathmandu Valley is a culturally rich and historically significant region in Nepal, known for its three ancient cities: Kathmandu, Patan, and Bhaktapur. This valley is a UNESCO World Heritage Site, featuring numerous UNESCO World Heritage shrines and exquisite monuments that reflect the artistic genius of the Newars, the original inhabitants. The valley is also home to Pashupatinath Temple, a major Hindu pilgrimage site, and Boudhanath Stupa, a significant Buddhist site. Visitors can explore vibrant markets, ancient temples, and the Kathmandu Durbar Square, which showcases the architectural marvels of the Malla period. The valley's rich tapestry of history, culture, and spirituality makes it a must-visit destination for travelers seeking to experience the essence of Nepal.</p>
            </div>

            <div class="place">
              <img class="place-img" src="top_places/pokhara.jpg" alt="Pokhara image" loading="lazy">
              <h4 class="montserrat-800">Pokhara</h4>
              <p class="place-desc lora-400">Pokhara, often referred to as the 'Jewel of Nepal,' is a vibrant city nestled in the lap of the Annapurna mountain range. Known for its stunning Fewa Lake and the reflection of the majestic Annapurna peaks, Pokhara offers a blend of natural beauty and cultural richness. The city is a major tourism hub, attracting visitors with its historical temples, such as the Tal Barahi Temple, and various adventure activities like paragliding and bungee jumping. Pokhara's unique position as a crossroads for different cultures, including Hindu and Buddhist traditions, makes it a fascinating destination for travelers seeking both adventure and spirituality.</p>
            </div>

            <div class="place">
              <img class="place-img" src="top_places/boudhanath.png" alt="Boudhanath Stupa image" loading="lazy">
              <h4 class="montserrat-800">Boudhanath Stupa</h4>
              <p class="place-desc lora-400">The Boudhanath Stupa, located in Kathmandu, Nepal, is one of the largest stupas in the world and a major spiritual landmark in Tibetan Buddhism. Built by King Manadeva, it is believed to house the relics of Kassapa Buddha and is situated along the historic trade route from Tibet to India. The stupa's circular base symbolizes Mount Meru and is adorned with the all-seeing eyes of the Buddha, making it a significant site for meditation and pilgrimage. It has been recognized as a UNESCO World Heritage Site since 1979 and is a vibrant cultural hub, attracting thousands of visitors each year.</p>
            </div>



          </div>

        </div>
      </div>

      <!-- Provinces of Nepal -->
      <div class="info-row" id="provinces">
        <div class="info-text">
          <h3>Provinces of Nepal</h3>

          <!-- Nepal Map with Provinces -->
          <div class="nepal-map">
            <img class="nepal-map-img" src="Provinces/map.png" alt="Nepal Map with Provinces" loading="lazy">
          </div>

          <!-- Provinces List -->
          <div class="provinces-list">
            <div class="province">
              <div class="province-text">
                <h4 class="montserrat-700">Province 1</h4>
                <p class="lora-400">Province 1 is located in the eastern part of Nepal and is known for its diverse landscapes, including mountains, hills, and Terai plains. It is home to Mount Everest and features cultural sites like the Everest region.</p>
              </div>
              <div class="province-media">
                <img class="province-img" src="Provinces/Illam-1631441491.jpg" alt="Province 1 Map" loading="lazy">
              </div>
            </div>

            <div class="province">
              <div class="province-text">
                <h4 class="montserrat-700">Province 2</h4>
                <p class="lora-400">Province 2, also known as Madhesh Province, is in the southeastern Terai region. It is rich in agriculture and has historical sites like the ancient city of Janakpur.</p>
              </div>
              <div class="province-media">
                <img class="province-img" src="Provinces/janakpur_ss_lt-1624431003.jpeg" alt="Province 2 Map" loading="lazy">
              </div>
            </div>

            <div class="province">
              <div class="province-text">
                <h4 class="montserrat-700">Bagmati Province</h4>
                <p class="lora-400">Bagmati Province is the central province and includes the capital city Kathmandu. It is known for its cultural heritage, temples, and urban development.</p>
              </div>
              <div class="province-media">
                <img class="province-img" src="Provinces/kathmandu_oy_lt2-1624431334.jpeg" alt="Bagmati Province Map" loading="lazy">
              </div>
            </div>

            <div class="province">
              <div class="province-text">
                <h4 class="montserrat-700">Gandaki Province</h4>
                <p class="lora-400">Gandaki Province is home to the Annapurna mountain range and Pokhara. It offers stunning natural beauty and is a hub for adventure tourism.</p>
              </div>
              <div class="province-media">
                <img class="province-img" src="Provinces/Gandaki-1631441545.jpg" alt="Gandaki Province Map" loading="lazy">
              </div>
            </div>

            <div class="province">
              <div class="province-text">
                <h4 class="montserrat-700">Lumbini Province</h4>
                <p class="lora-400">Lumbini Province is the birthplace of Buddha and includes the Lumbini site. It is significant for its religious and historical importance.</p>
              </div>
              <div class="province-media">
                <img class="province-img" src="Provinces/Lumbini-1631441562.jpg" alt="Lumbini Province Map" loading="lazy">
              </div>
            </div>

            <div class="province">
              <div class="province-text">
                <h4 class="montserrat-700">Karnali Province</h4>
                <p class="lora-400">Karnali Province is in the mid-western region and features rugged terrains, rivers, and is known for its natural resources and biodiversity.</p>
              </div>
              <div class="province-media">
                <img class="province-img" src="Provinces/shey-1626727697.jpeg" alt="Karnali Province Map" loading="lazy">
              </div>
            </div>

            <div class="province">
              <div class="province-text">
                <h4 class="montserrat-700">Sudurpashchim Province</h4>
                <p class="lora-400">Sudurpashchim Province, the far-western province, includes areas near the border with India and features diverse landscapes from plains to hills.</p>
              </div>
              <div class="province-media">
                <img class="province-img" src="Provinces/Khaptad_taan_trekker_(6)-1624819036.jpg" alt="Sudurpashchim Province Map" loading="lazy">
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </section>
</main>

<!-- Background sound (toggleable) -->
<audio id="bg-sound" loop preload="auto" aria-hidden="true">
  <source src="Audio.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<script>
// Create floating particles
(function createParticles() {
  const particlesContainer = document.getElementById('particles');
  if (!particlesContainer) return;
  
  const particleCount = 30;
  
  for (let i = 0; i < particleCount; i++) {
    const particle = document.createElement('div');
    particle.classList.add('particle');
    
    // Random position
    const left = Math.random() * 100;
    const delay = Math.random() * 15;
    const duration = 10 + Math.random() * 10;
    
    particle.style.left = `${left}%`;
    particle.style.animationDelay = `${delay}s`;
    particle.style.animationDuration = `${duration}s`;
    
    // Random size variation
    const size = 2 + Math.random() * 3;
    particle.style.width = `${size}px`;
    particle.style.height = `${size}px`;
    
    // Opacity variation
    particle.style.opacity = 0.3 + Math.random() * 0.4;
    
    particlesContainer.appendChild(particle);
  }
})();

// Hide scroll indicator when user scrolls
(function handleScrollIndicator() {
  const scrollIndicator = document.querySelector('.scroll-indicator');
  if (!scrollIndicator) return;
  
  let timeout;
  
  function hideIndicator() {
    scrollIndicator.style.opacity = '0';
    scrollIndicator.style.pointerEvents = 'none';
  }
  
  function showIndicator() {
    scrollIndicator.style.opacity = '0.8';
    scrollIndicator.style.pointerEvents = 'auto';
  }
  
  window.addEventListener('scroll', () => {
    hideIndicator();
    clearTimeout(timeout);
    timeout = setTimeout(showIndicator, 1000);
  });
})();

// Fullscreen background video tilt (rotateX/rotateY) parallax using intrinsic video size
const video = document.getElementById('bg-video');
const status = document.getElementById('video-status');

let videoW = 0, videoH = 0;
let baseScale1 = 1; // single video
const slightCrop = 1.0; // minimal crop factor when video is already larger than viewport (set to 1 to avoid extra zoom)
const maxUpscale = 1.01; // cap how much we upscale a small source to avoid heavy blur when stretching to fill the viewport
const maxRotate = 8; // degrees of rotation for tilt (reduced for smoother feel)
const maxTranslate = 40; // px translation for smooth parallax shift without excessive movement

let targetRX = 0, targetRY = 0, currentRX = 0, currentRY = 0;
let targetTX = 0, targetTY = 0, currentTX = 0, currentTY = 0;
let currentVideo = video;

function showStatus(msg, show = true) {
  if (!status) return;
  status.textContent = msg;
  status.style.display = show ? 'block' : 'none';
}

video.addEventListener('loadedmetadata', () => {
  videoW = video.videoWidth;
  videoH = video.videoHeight;
  // Use intrinsic width so the video is shown at its real size
  video.style.width = videoW + 'px';
  video.style.height = 'auto';
  updateBaseScale1();
  showStatus('', false);
});

video.addEventListener('canplay', () => {
  showStatus('', false);
});

video.addEventListener('error', (e) => {
  console.error('Video error', e);
  showStatus('Video failed to load. Check filename/codec or try re-encoding to H.264 MP4.', true);
  video.controls = true;
});

video.addEventListener('stalled', () => {
  showStatus('Video stalled while loading', true);
});

// Try to start playback programmatically and detect autoplay issues
video.play().catch((err) => {
  console.warn('Autoplay prevented:', err);
  showStatus('Autoplay prevented ‚Äî click to play', true);
  video.controls = true;
});

function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

function updateBaseScale1(){
  if (!videoW || !videoH) return;
  const scaleX = window.innerWidth / videoW;
  const scaleY = window.innerHeight / videoH;
  let needed = Math.max(1, Math.max(scaleX, scaleY)); // ensure video covers viewport

  // avoid excessive upscaling which introduces blur ‚Äî cap the upscale factor
  if (typeof maxUpscale !== 'undefined' && needed > maxUpscale) {
    // If we cap, the video might not completely fill both axes, but it will preserve more detail
    needed = maxUpscale;
  }
  
  // For videos larger than viewport, use minimal scaling to reduce zoom and preserve quality
  if (needed <= 1) {
    baseScale1 = 1.0; // Keep at natural size, no upscaling
  } else {
    baseScale1 = Math.min(needed, maxUpscale); // Cap scaling for quality
  }
} 

function onMouseMove(e){
  // Normalize -1 .. 1
  const rx = (e.clientX / window.innerWidth - 0.5) * 2;
  const ry = (e.clientY / window.innerHeight - 0.5) * 2;

  // rotation mapping (invert horizontal for natural feel)
  targetRY = clamp(-rx * maxRotate, -maxRotate, maxRotate);
  targetRX = clamp(ry * maxRotate, -maxRotate, maxRotate);

  // small translation to enhance depth (adjusted for smooth parallax)
  targetTX = clamp(rx * maxTranslate, -maxTranslate, maxTranslate);
  targetTY = clamp(ry * maxTranslate, -maxTranslate, maxTranslate);
}

// Respect user 'prefers-reduced-motion'‚Äîdon't attach a parallax listener if they prefer reduced motion
const reducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
if (!reducedMotion) {
  window.addEventListener('mousemove', onMouseMove, {passive: true});
} else {
  // keep video centered and reset any targets to avoid micro-movement
  targetRX = targetRY = targetTX = targetTY = 0;
  currentRX = currentRY = currentTX = currentTY = 0;
  currentVideo.style.transform = `translate(-50%,-50%) rotateX(0deg) rotateY(0deg) scale(${baseScale1})`;
}

// Smooth animation loop using frame-time damping for buttery motion
let lastTime = performance.now();
function animate(now){
  const dt = Math.min(0.05, (now - lastTime) / 1000); // seconds, capped
  lastTime = now;

  // responsiveness (lowered for smoother, less jittery motion without gaps)
  const rotSpeed = 3.8;
  const transSpeed = 4.8;

  const sRot = 1 - Math.exp(-rotSpeed * dt);
  const sTrans = 1 - Math.exp(-transSpeed * dt);

  currentRX += (targetRX - currentRX) * sRot;
  currentRY += (targetRY - currentRY) * sRot;
  currentTX += (targetTX - currentTX) * sTrans;
  currentTY += (targetTY - currentTY) * sTrans;

  // remove micro-jitter with higher thresholds to ensure smooth continuous movement
  if (Math.abs(currentRX) < 0.001) currentRX = 0;
  if (Math.abs(currentRY) < 0.001) currentRY = 0;
  if (Math.abs(currentTX) < 0.1) currentTX = 0;
  if (Math.abs(currentTY) < 0.1) currentTY = 0;

  // round translations to whole pixels to avoid sub-pixel blurring, and rotations to 0.1deg
  const tx = Math.round(currentTX);
  const ty = Math.round(currentTY);
  const rx = Math.round(currentRX * 10) / 10;
  const ry = Math.round(currentRY * 10) / 10;

  // GPU-accelerated composite transform; separate the percent offset from pixel translations
  let scale = baseScale1;
  currentVideo.style.transform = `translate(-50%,-50%) translate3d(${tx}px, ${ty}px, 0) rotateX(${rx}deg) rotateY(${ry}deg) scale(${scale})`; 

  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);

window.addEventListener('resize', () => {
  updateBaseScale1();
});

// Reveal the info section only when the user scrolls it into view (homepage remains the video)
(function revealOnScroll(){
  const infoSection = document.querySelector('.info-section');
  if (!infoSection) return;

  // mark hidden for accessibility
  infoSection.setAttribute('aria-hidden', 'true');

  const homepageBanner = document.querySelector('.homepage-banner');
  const titleEl = document.querySelector('.info-section .info-text h2');
  let titleSequenceRan = false;

  // ensure banner starts visible on the homepage
  if (homepageBanner) homepageBanner.classList.add('visible');

  const reveal = () => {
    infoSection.classList.add('visible');
    infoSection.setAttribute('aria-hidden', 'false');

    // hide the homepage banner and reveal the title
    if (homepageBanner) {
      homepageBanner.classList.remove('visible');
    }

    // run the title reveal after a short pause so the transition feels natural
    setTimeout(() => {
      if (titleEl) titleEl.classList.add('revealed');
      titleSequenceRan = true;
    }, 300);

    // also softly blur the video for contrast
    if (videoWrapper) videoWrapper.classList.add('blurred');
  };

  const hide = () => {
    infoSection.classList.remove('visible');
    infoSection.setAttribute('aria-hidden', 'true');

    // show the homepage banner again and reset title
    if (homepageBanner) {
      // restart transition cleanly
      homepageBanner.classList.remove('visible');
      void homepageBanner.offsetWidth;
      homepageBanner.classList.add('visible');
    }
    if (titleEl) titleEl.classList.remove('revealed');
    titleSequenceRan = false;

    // remove video blur when the info section is hidden
    if (videoWrapper) videoWrapper.classList.remove('blurred');
  };

  // IntersectionObserver for efficient detection
  const videoWrapper = document.querySelector('.video-wrapper');

  if ('IntersectionObserver' in window) {
    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) reveal();
        else hide();
      });
    }, { threshold: 0.12 });
    io.observe(infoSection);

    // Also observe individual rows to animate them as they enter the viewport
    const rows = infoSection.querySelectorAll('.info-row');
    if (rows.length) {
      const rowObserver = new IntersectionObserver((entries) => {
        entries.forEach(en => {
          if (en.isIntersecting) en.target.classList.add('in-view');
        });
      }, { threshold: 0.2 });
      rows.forEach(r => rowObserver.observe(r));

      // also observe full sections to update quick-links active state
      const sectionObserver = new IntersectionObserver((entries) => {
        // don't set any active link until the info section is revealed
        if (!infoSection.classList.contains('visible')) {
          document.querySelectorAll('#quick-links a').forEach(a => a.classList.remove('active'));
          return;
        }

        let found = false;
        entries.forEach(en => {
          const id = en.target.id;
          const link = document.querySelector(`#quick-links a[href="#${id}"]`);
          // require a substantial intersection to consider the section 'active'
          if (en.isIntersecting && (en.intersectionRatio || 0) >= 0.5) {
            document.querySelectorAll('#quick-links a').forEach(a => a.classList.remove('active'));
            if (link) link.classList.add('active');
            found = true;
          }
        });

        if (!found) {
          document.querySelectorAll('#quick-links a').forEach(a => a.classList.remove('active'));
        }
      }, { threshold: [0.5, 0.75] });
      rows.forEach(r => { if (r.id) sectionObserver.observe(r); });
    }
  } else {
    // Fallback: simple scroll check
    const onScroll = () => {
      if (window.scrollY > window.innerHeight * 0.05) reveal();
      else hide();

      // fallback: mark rows visible when scrolled enough
      document.querySelectorAll('.info-row').forEach((r, i) => {
        if (window.scrollY > window.innerHeight * (0.2 + i * 0.05)) r.classList.add('in-view');
      });
    };
    window.addEventListener('scroll', onScroll, { passive: true });
    // run once to set initial state
    onScroll();
  }
})();

// Dynamic mask reveal removed ‚Äî the banner reveal sequence now controls the heading mask/background.
// Set an explicit initial state so the .revealed class can animate from 0 -> 100% cleanly.
const title = document.querySelector('.info-section .info-text h2');
if (title) {
  title.style.maskSize = '0% 0%';
  title.style.webkitMaskSize = '0% 0%';
  title.style.backgroundSize = '0% 0%';
}

// Fallback: apply the supplied image URLs to the info items in case an inline src didn't update
(function applyProvidedImages(){
  try {
    const imgs = document.querySelectorAll('.info-img');
    if (imgs[0]) imgs[0].src = 'https://tse2.mm.bing.net/th/id/OIP._UNasqmNY5xyWu98GiyupAHaFM?rs=1&pid=ImgDetMain&o=7&rm=3';
    if (imgs[1]) imgs[1].src = 'https://th.bing.com/th/id/OIP.nDmRWmh-NzqeIrKxp6d8-wHaDj?w=289&h=180&c=7&r=0&o=7&pid=1.7&rm=3';
    if (imgs[2]) { imgs[2].src = 'https://tse1.mm.bing.net/th/id/OIP.jvdtAq3plpeZKqYKcJiW7AHaEK?rs=1&pid=ImgDetMain&o=7&rm=3'; imgs[2].loading = 'lazy'; }
  } catch(e) { console.warn('Error applying images', e); }
})();

// Small sound toggle controller
(function(){
  const audio = document.getElementById('bg-sound');
  const btn = document.getElementById('sound-toggle');
  const statusEl = document.getElementById('video-status');
  if (!audio || !btn) return;

  audio.volume = 0.8;
  let isOn = false;

  function updateButton(){
    btn.classList.toggle('on', isOn);
    btn.setAttribute('aria-pressed', String(isOn));
    btn.textContent = isOn ? 'üîä' : 'üîà';
    btn.title = isOn ? 'Sound on ‚Äî click to turn off' : 'Sound off ‚Äî click to turn on';
  }

  btn.addEventListener('click', () => {
    if (!isOn) {
      audio.play().then(() => {
        isOn = true; updateButton();
        localStorage.setItem('bgSoundOn', 'true');
      }).catch((err) => {
        console.warn('Unable to play audio:', err);
        if (statusEl) { statusEl.textContent = 'Tap to enable sound'; statusEl.style.display = 'block'; setTimeout(()=>statusEl.style.display='none',2500); }
      });
    } else {
      audio.pause();
      isOn = false; updateButton();
      localStorage.setItem('bgSoundOn', 'false');
    }
  });

  btn.addEventListener('keydown', (e) => {
    if (e.key === ' ' || e.key === 'Enter') { e.preventDefault(); btn.click(); }
  });

  // Restore saved user preference if any
  const saved = localStorage.getItem('bgSoundOn');
  if (saved === 'true') {
    audio.play().then(()=>{ isOn = true; updateButton(); }).catch(()=>{ isOn = false; updateButton(); });
  } else {
    isOn = false; updateButton();
  }
})();

// Search UI controller
(function(){
  const toggle = document.getElementById('search-toggle');
  const pop = document.getElementById('search-popover');
  const input = document.getElementById('search-input');
  const results = document.getElementById('search-results');
  const empty = document.getElementById('search-empty');
  if (!toggle || !pop || !input || !results) return;

  function openPop(){ pop.hidden = false; toggle.setAttribute('aria-expanded','true'); setTimeout(()=>input.focus(),50); }
  function closePop(){ pop.hidden = true; toggle.setAttribute('aria-expanded','false'); input.value = ''; clearResults(); toggle.focus(); }

  toggle.addEventListener('click', ()=>{ if (pop.hidden) openPop(); else closePop(); });

  // gather searchable content
  function gatherItems(){
    const rows = document.querySelectorAll('.info-row');
    return Array.from(rows).map(r => {
      const id = r.id || '';
      const titleEl = r.querySelector('h2,h3');
      const title = titleEl ? titleEl.textContent.trim() : '';
      const text = (r.querySelector('.info-text') ? r.querySelector('.info-text').innerText : r.innerText).replace(/\s+/g,' ').trim();
      return { id, title, text };
    });
  }
  const items = gatherItems();

  function clearResults(){ results.innerHTML = ''; empty.hidden = true; }

  function getSnippet(text, q){
    const idx = text.toLowerCase().indexOf(q);
    if (idx === -1) return text.slice(0,120) + (text.length>120 ? '...' : '');
    const start = Math.max(0, idx - 30);
    const end = Math.min(text.length, idx + 90);
    let s = text.slice(start, end);
    if (start > 0) s = '...' + s;
    if (end < text.length) s = s + '...';
    // highlight matches
    return s.replace(new RegExp(q, 'ig'), m => `<mark>${m}</mark>`);
  }

  function updateResults(q){
    clearResults();
    const term = q.trim().toLowerCase();
    if (!term) return;
    const matches = items.filter(it => it.title.toLowerCase().includes(term) || it.text.toLowerCase().includes(term));
    if (!matches.length) { empty.hidden = false; return; }
    matches.forEach(m => {
      const li = document.createElement('li');
      li.className = 'search-result-item';
      li.setAttribute('role','option');
      li.tabIndex = 0;
      li.innerHTML = `<strong>${m.title}</strong><div class="search-snippet">${getSnippet(m.text, term)}</div>`;
      li.addEventListener('click', () => goTo(m.id));
      li.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); goTo(m.id); } });
      results.appendChild(li);
    });
  }

  function goTo(id){
    const el = document.getElementById(id);
    if (!el) return;
    closePop();
    el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    el.classList.add('search-highlight');
    setTimeout(() => el.classList.remove('search-highlight'), 2200);
  }

  input.addEventListener('input', (e) => updateResults(e.target.value));

  // keyboard & accessibility
  toggle.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle.click(); } });
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && !pop.hidden) closePop(); });

  // click outside to close
  document.addEventListener('click', (e) => { if (!pop.hidden && !pop.contains(e.target) && e.target !== toggle) closePop(); });

})();

// Video switching controller
(function(){
  const video1 = document.getElementById('bg-video');
  const video2 = document.getElementById('bg-video2'); // may be null
  const video3 = document.getElementById('bg-video3'); // may be null
  const video4 = document.getElementById('bg-video4'); // may be null
  const overlay = document.getElementById('video-overlay');

  if (!video1) return;

  // ensure the global currentVideo (used by animate) points to the active element
  currentVideo = video1;

  function updateCredits(v) {
    if (!overlay) return;
    if (!v) { overlay.style.display = 'none'; return; }
    if (v.id === 'bg-video') {
      overlay.textContent = 'Credits to Nepal Tourism Board';
      overlay.style.display = 'block';
    } else if (v.id === 'bg-video4') {
      overlay.textContent = 'Credits to PostPati/KB Gurung';
      overlay.style.display = 'block';
    } else {
      overlay.style.display = 'none';
    }
  }

  function switchToVideo(nextVideo) {
    if (!nextVideo || currentVideo === nextVideo) return;
    if (currentVideo) currentVideo.style.opacity = '0';
    nextVideo.style.opacity = '1';
    setTimeout(() => {
      if (currentVideo) { try { currentVideo.pause(); currentVideo.currentTime = 0; } catch(e){} }
      nextVideo.play().catch(err => console.warn('Video play error:', err));
      currentVideo = nextVideo;
      updateCredits(nextVideo);
    }, 1000);
  }

  if (video2) {
    if (video3) {
      if (video4) {
        // 4-video sequence: 1 -> 2 -> 3 -> 4 -> 1
        video1.addEventListener('ended', () => switchToVideo(video2));
        video2.addEventListener('ended', () => switchToVideo(video3));
        video3.addEventListener('ended', () => switchToVideo(video4));
        video4.addEventListener('ended', () => switchToVideo(video1));

        video2.addEventListener('loadedmetadata', updateBaseScale2);
        video3.addEventListener('loadedmetadata', updateBaseScale3);
        video4.addEventListener('loadedmetadata', updateBaseScale4);
        updateBaseScale2(); updateBaseScale3(); updateBaseScale4();
      } else {
        // 3-video sequence: 1 -> 2 -> 3 -> 1
        video1.addEventListener('ended', () => switchToVideo(video2));
        video2.addEventListener('ended', () => switchToVideo(video3));
        video3.addEventListener('ended', () => switchToVideo(video1));

        video2.addEventListener('loadedmetadata', updateBaseScale2);
        video3.addEventListener('loadedmetadata', updateBaseScale3);
        updateBaseScale2(); updateBaseScale3();
      }
    } else {
      // 2-video sequence remains: 1 <-> 2
      video1.addEventListener('ended', () => switchToVideo(video2));
      video2.addEventListener('ended', () => switchToVideo(video1));
      video2.addEventListener('loadedmetadata', updateBaseScale2);
      updateBaseScale2();
    }
  } else {
    // single-video fallback: loop so it doesn't go blank after ending
    video1.loop = true;
  }

  // Set initial credits for the starting video
  updateCredits(video1);

  // Start with video1 playing
  video1.play().catch(err => console.warn('Video1 play error:', err));
})();

// Nepal clock controller (digital + analog)
(function(){
  const btn = document.getElementById('nepal-btn');
  const pop = document.getElementById('nepal-clock-pop');
  const timeEl = document.getElementById('nepal-clock-time');
  const dateEl = document.getElementById('nepal-clock-date');
  const canvas = document.getElementById('nepal-analog');
  const ctx = canvas ? canvas.getContext('2d') : null;
  const NEPAL_OFFSET_MIN = 5*60 + 45; // +5:45

  function toNepalDate(date){
    const utc = date.getTime() + (date.getTimezoneOffset() * 60000);
    return new Date(utc + NEPAL_OFFSET_MIN * 60000);
  }

  function sizeCanvas(){
    if (!canvas || !ctx) return;
    const size = 120;
    const ratio = window.devicePixelRatio || 1;
    canvas.style.width = size + 'px';
    canvas.style.height = size + 'px';
    canvas.width = size * ratio;
    canvas.height = size * ratio;
    ctx.setTransform(ratio,0,0,ratio,0,0);
  }

  function drawAnalog(d){
    if (!ctx) return;
    const w = canvas.width / (window.devicePixelRatio || 1);
    const h = canvas.height / (window.devicePixelRatio || 1);
    ctx.clearRect(0,0,w,h);
    const cx = w/2, cy = h/2, radius = Math.min(w,h) * 0.45;

    // subtle dial background
    const g = ctx.createLinearGradient(0,0,0,h);
    g.addColorStop(0, 'rgba(255,255,255,0.02)');
    g.addColorStop(1, 'rgba(255,255,255,0.01)');
    ctx.fillStyle = g;
    ctx.beginPath(); ctx.arc(cx,cy,radius+6,0,Math.PI*2); ctx.fill();

    // outer ring
    ctx.strokeStyle = 'rgba(255,255,255,0.06)'; ctx.lineWidth = 1.5;
    ctx.beginPath(); ctx.arc(cx,cy,radius,0,Math.PI*2); ctx.stroke();

    // ticks
    for (let i=0;i<60;i++){
      const ang = (Math.PI*2) * (i/60) - Math.PI/2;
      const inner = radius - (i%5?6:12);
      const outer = radius - 2;
      ctx.strokeStyle = i%5 ? 'rgba(255,255,255,0.06)' : 'rgba(255,255,255,0.14)';
      ctx.lineWidth = i%5 ? 1 : 2;
      ctx.beginPath(); ctx.moveTo(cx+Math.cos(ang)*inner, cy+Math.sin(ang)*inner); ctx.lineTo(cx+Math.cos(ang)*outer, cy+Math.sin(ang)*outer); ctx.stroke();
    }

    const hh = d.getUTCHours() % 12;
    const mm = d.getUTCMinutes();
    const ss = d.getUTCSeconds();
    const hourAngle = (Math.PI*2) * ((hh*60 + mm) / (12*60)) - Math.PI/2;
    const minAngle = (Math.PI*2) * ((mm*60 + ss) / 3600) - Math.PI/2;
    const secAngle = (Math.PI*2) * (ss/60) - Math.PI/2;

    // hour hand
    ctx.strokeStyle = 'rgba(255,255,255,0.95)'; ctx.lineWidth = 4; ctx.lineCap = 'round';
    ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(cx + Math.cos(hourAngle) * (radius * 0.52), cy + Math.sin(hourAngle) * (radius * 0.52)); ctx.stroke();
    // minute
    ctx.strokeStyle = 'rgba(255,255,255,0.95)'; ctx.lineWidth = 3;
    ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(cx + Math.cos(minAngle) * (radius * 0.72), cy + Math.sin(minAngle) * (radius * 0.72)); ctx.stroke();
    // second
    ctx.strokeStyle = 'rgba(255,120,162,0.95)'; ctx.lineWidth = 1.5;
    ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(cx + Math.cos(secAngle) * (radius * 0.82), cy + Math.sin(secAngle) * (radius * 0.82)); ctx.stroke();

    // center hub
    ctx.fillStyle = 'rgba(255,255,255,0.95)'; ctx.beginPath(); ctx.arc(cx,cy,3,0,Math.PI*2); ctx.fill();
  }

  function update(){
    try {
      const now = new Date();
      const nepal = toNepalDate(now);
      const timeFmt = new Intl.DateTimeFormat(undefined, { hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:false, timeZone:'Asia/Kathmandu' });
      const dateFmt = new Intl.DateTimeFormat(undefined, { weekday:'short', month:'short', day:'numeric', timeZone:'Asia/Kathmandu' });
      const timeStr = timeFmt.format(nepal);
      const dateStr = dateFmt.format(nepal);
      if (timeEl) timeEl.textContent = timeStr;
      if (dateEl) dateEl.textContent = dateStr;
      const small = document.querySelector('#nepal-btn .clock-time');
      if (small) small.textContent = timeStr.replace(/:\\d{2}$/, '');

      if (canvas) drawAnalog(nepal);
    } catch(e){ console.warn('Nepal clock error', e); }
  }

  // initialize
  sizeCanvas();
  update();
  setInterval(update, 1000);
  window.addEventListener('resize', sizeCanvas);

  if (!btn || !pop) return;
  btn.addEventListener('click', (e) => {
    const show = pop.hidden;
    pop.hidden = !show;
    btn.setAttribute('aria-expanded', String(show));
    if (show) pop.querySelector('button')?.focus?.();
  });

  // close when clicking outside
  document.addEventListener('click', (e) => {
    // Consider clicks inside the popover or inside the toggle button as 'inside'
    if (!pop.hidden && !pop.contains(e.target) && !btn.contains(e.target)) {
      pop.hidden = true; btn.setAttribute('aria-expanded','false');
    }
  });

  document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && !pop.hidden) { pop.hidden = true; btn.setAttribute('aria-expanded','false'); } });
})();

</script>

</body>
</html>
