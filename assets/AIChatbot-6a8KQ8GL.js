import{r as a,j as e}from"./vendor-ui-QgVN0H1W.js";import{c as v,X as N,L as w,I as k,B as I,s as A}from"./index-z_EbRe_p.js";import{p as C,c as S}from"./markdownParser-CvRXSPA6.js";import{m as i,A as L}from"./vendor-motion-7Gg7V_LS.js";import{B as d,S as M}from"./send-BEMNvcIY.js";import{U as B}from"./gonepallogo-Cu4Fv82l.js";import"./vendor-charts-K-ahvkCb.js";import"./vendor-react-GoYkDhlm.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=v("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),U=()=>{const[m,x]=a.useState(!1),[t,p]=a.useState(""),[l,c]=a.useState([{role:"assistant",content:"Namaste! ðŸ™ I'm Go Guide, An Assistant made for helping user travel nepal. Ask me anything about destinations, trekking, permits, or travel tips!"}]),[n,u]=a.useState(!1),f=a.useRef(null),y=()=>{f.current?.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{y()},[l]);const h=async()=>{if(!t.trim()||n)return;const s=t.trim();p(""),c(r=>[...r,{role:"user",content:s}]),u(!0);try{const{data:r,error:o}=await A.functions.invoke("ai-chatbot",{body:{message:s,history:l.slice(-10)}});if(o)throw o;const j=S(r.reply);c(b=>[...b,{role:"assistant",content:j}])}catch(r){console.error("Chatbot error:",r),c(o=>[...o,{role:"assistant",content:"Sorry, I encountered an error. Please try again later."}])}finally{u(!1)}},g=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),h())};return e.jsxs(e.Fragment,{children:[e.jsx(i.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>x(!0),className:`fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full bg-primary text-primary-foreground shadow-lg flex items-center justify-center ${m?"hidden":""}`,children:e.jsx(E,{className:"w-6 h-6"})}),e.jsx(L,{children:m&&e.jsxs(i.div,{initial:{opacity:0,y:100,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.95},transition:{type:"spring",damping:25},className:"fixed bottom-6 right-6 z-50 w-[380px] h-[500px] bg-card border border-border rounded-2xl shadow-elevated flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-primary text-primary-foreground p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-foreground/20 flex items-center justify-center",children:e.jsx(d,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"GoGuide"}),e.jsx("p",{className:"text-xs text-primary-foreground/70",children:"Powered by AI"})]})]}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-primary-foreground/10 rounded-full transition-colors",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.map((s,r)=>e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex gap-3 ${s.role==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${s.role==="user"?"bg-primary text-primary-foreground":"bg-accent/20 text-accent"}`,children:s.role==="user"?e.jsx(B,{className:"w-4 h-4"}):e.jsx(d,{className:"w-4 h-4"})}),e.jsx("div",{className:`max-w-[75%] p-3 rounded-2xl text-sm ${s.role==="user"?"bg-primary text-primary-foreground rounded-tr-none":"bg-secondary text-foreground rounded-tl-none"}`,children:s.role==="user"?s.content:e.jsx("div",{className:"whitespace-pre-wrap",children:C(s.content)})})]},r)),n&&e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center",children:e.jsx(d,{className:"w-4 h-4 text-accent"})}),e.jsx("div",{className:"bg-secondary p-3 rounded-2xl rounded-tl-none",children:e.jsx(w,{className:"w-4 h-4 animate-spin text-muted-foreground"})})]}),e.jsx("div",{ref:f})]}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{value:t,onChange:s=>p(s.target.value),onKeyPress:g,placeholder:"Ask about Nepal...",className:"flex-1",disabled:n}),e.jsx(I,{onClick:h,disabled:!t.trim()||n,size:"icon",className:"btn-primary",children:e.jsx(M,{className:"w-4 h-4"})})]})})]})})]})};export{U as default};
