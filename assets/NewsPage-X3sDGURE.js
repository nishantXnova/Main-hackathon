import{r as i,j as e}from"./vendor-ui-QgVN0H1W.js";import{L as C}from"./vendor-react-GoYkDhlm.js";import{c as q,B as m,Z as V,T as N,S as $,L as Z,I as G,C as J,s as Q}from"./index-z_EbRe_p.js";import{B as X,R as ee,E as se}from"./badge-CkKTG4N3.js";import{f as te}from"./newsService-B1JQC7Pa.js";import{A as L}from"./arrow-left-DcmaaTR1.js";import{N as R}from"./newspaper-Bh7e0O0f.js";import{A as ae,m as g}from"./vendor-motion-7Gg7V_LS.js";import{B as re,S as le}from"./send-BEMNvcIY.js";import"./vendor-charts-K-ahvkCb.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=q("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),B=["flood","earthquake","landslide","bandh","border closed","airport closed"],D=["wildlife","tiger","elephant","bear","snake","accident","robbery","theft","attack","safety"],z=["election","vote","political","protest","rally","parliament","government","minister","party"],j=t=>{const o=`${t.title} ${t.content||""}`.toLowerCase();return B.some(a=>o.includes(a))?"emergency":D.some(a=>o.includes(a))?"safety":z.some(a=>o.includes(a))?"advisory":null},ne=t=>{const o=t.toLowerCase();return B.some(a=>o.includes(a))||D.some(a=>o.includes(a))?"high":z.some(a=>o.includes(a))?"moderate":"low"},oe=`You are Nepal News Buddy, an AI news summarizer specially designed for tourists visiting Nepal.
Your role is to:
1. Summarize news articles in simple, clear English that any tourist can understand.
2. Highlight how each news item might affect travel plans (e.g. road closures, festival dates, weather alerts).
3. Always recommend safety precautions when reporting on floods, landslides, or severe weather.
4. Mention relevant tourist tips where appropriate (e.g. "This festival is a great time to visit Kathmandu!").
5. Keep summaries friendly, concise, and upbeat unless it's an emergency alert.
6. Format: Start with a 1-sentence TL;DR, then 2-3 bullet points of tourist-relevant details.`,ce=({item:t,onSummarize:o})=>{const a=new Date(t.pubDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),n=j(t);return e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},transition:{duration:.3},className:"bg-white rounded-xl border border-black/[0.08] shadow-[0_2px_12px_rgba(0,0,0,0.06)] hover:shadow-[0_8px_24px_rgba(0,0,0,0.12)] transition-all duration-300 flex flex-col overflow-hidden",children:[t.thumbnail&&e.jsxs("div",{className:"relative h-[180px] overflow-hidden",children:[e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105",style:{borderRadius:"8px 8px 0 0"},onError:d=>{d.target.src="https://images.unsplash.com/photo-1544735716-392fe2489ffa?q=80&w=1000&auto=format&fit=crop"}}),n==="emergency"&&e.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-1.5 bg-red-500 text-white text-[10px] font-bold px-2.5 py-1 rounded-full uppercase tracking-wide",children:[e.jsx(N,{className:"w-3 h-3"}),"Emergency"]}),n==="advisory"&&e.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-1.5 bg-amber-500 text-white text-[10px] font-bold px-2.5 py-1 rounded-full uppercase tracking-wide",children:"âš ï¸ Travel Advisory"}),n==="safety"&&e.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-1.5 bg-red-600 text-white text-[10px] font-bold px-2.5 py-1 rounded-full uppercase tracking-wide",children:"ðŸ”´ Safety Alert"})]}),e.jsxs("div",{className:"p-5 flex flex-col flex-1",children:[n&&!t.thumbnail&&e.jsxs("div",{className:`flex items-center gap-1.5 text-[10px] font-bold px-2.5 py-1 rounded-full uppercase tracking-wide mb-3 self-start ${n==="emergency"?"bg-red-500 text-white":n==="advisory"?"bg-amber-500 text-white":"bg-red-600 text-white"}`,children:[n==="emergency"&&e.jsx(N,{className:"w-3 h-3"}),n==="emergency"?"Emergency":n==="advisory"?"âš ï¸ Travel Advisory":"ðŸ”´ Safety Alert"]}),e.jsx("h3",{className:"font-semibold text-base leading-snug mb-3 line-clamp-3 text-gray-900",children:t.title}),e.jsxs("div",{className:"mt-auto flex items-center justify-between pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[e.jsx(J,{className:"w-3 h-3"}),a]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{size:"sm",onClick:()=>o(t),className:"text-xs h-7 px-3 bg-[#E67E22] hover:bg-[#D35400] text-white gap-1 rounded-md transition-all duration-200 hover:shadow-[0_0_12px_rgba(230,126,34,0.4)]",children:[e.jsx($,{className:"w-3 h-3"}),"AI Summary"]}),e.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-xs flex items-center gap-1 text-gray-500 hover:text-[#E67E22] transition-colors",children:[e.jsx(se,{className:"w-3 h-3"}),"Read"]})]})]})]})]})},de=[{id:"all",label:"All"},{id:"safety",label:"Safety"},{id:"weather",label:"Weather"},{id:"transport",label:"Transport"},{id:"culture",label:"Culture"}],me={all:[],safety:["safety","alert","emergency","flood","earthquake","landslide","accident","health","hospital","police"],weather:["weather","rain","monsoon","snow","temperature","forecast","climate"],transport:["flight","airport","road","bus","taxi","tour","trek","route","closed","open"],culture:["festival","culture","religious","temple","dance","music","celebration","holiday"]},ke=()=>{const[t,o]=i.useState([]),[a,n]=i.useState(!0),[d,k]=i.useState(null),[E,K]=i.useState(""),[x,M]=i.useState("all"),[O,S]=i.useState(!1),[T,f]=i.useState([{role:"assistant",content:`Namaste! ðŸ™ I'm Nepal News Buddy. Click **"AI Summary"** on any article and I'll explain what it means for your trip â€” in plain English!`}]),[h,I]=i.useState(""),[p,F]=i.useState(!1),A=i.useRef(null),Y=()=>A.current?.scrollIntoView({behavior:"smooth"});i.useEffect(Y,[T]);const y=async()=>{n(!0),k(null);try{const s=await te();o(s),K(new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}))}catch{k("Could not load news. Please check your connection and try again.")}finally{n(!1)}},U=async()=>{S(!0),await y(),setTimeout(()=>S(!1),500)};i.useEffect(()=>{y()},[]);const b=i.useMemo(()=>{if(x==="all")return t;const s=me[x];return t.filter(r=>{const l=`${r.title} ${r.content||""}`.toLowerCase();return s.some(c=>l.includes(c))})},[t,x]),w=async(s,r)=>{if(!s.trim()||p)return;const l=r?`${r}

User question: ${s}`:s;f(c=>[...c,{role:"user",content:s}]),I(""),F(!0);try{const{data:c,error:_}=await Q.functions.invoke("ai-chatbot",{body:{message:l,history:[{role:"user",content:oe}]}});if(_)throw _;const u=ne(s+r),P=`**${u==="high"?"ðŸ”´":u==="moderate"?"ðŸŸ¡":"ðŸŸ¢"} ${u==="high"?"High Impact":u==="moderate"?"Moderate Impact":"Low Impact"}**

${c.reply}`;f(W=>[...W,{role:"assistant",content:P}])}catch{f(c=>[...c,{role:"assistant",content:"Sorry, I had trouble reaching the AI right now. Please try again in a moment!"}])}finally{F(!1)}},H=s=>{const r=j(s),l=`You are summarizing a news article for a tourist visiting Nepal.

Article title: "${s.title}"
Article link: ${s.link}
${r==="emergency"?`âš ï¸ This is an emergency/travel alert.
`:""}${r==="advisory"?`âš ï¸ This is a political/advisory news.
`:""}${r==="safety"?`âš ï¸ This is a safety-related news.
`:""}`;w("Please summarize this news article and tell me how it might affect my travels in Nepal.",l),document.getElementById("ai-panel")?.scrollIntoView({behavior:"smooth"})},v=t.filter(s=>j(s)==="emergency").length;return e.jsxs("div",{className:"min-h-screen bg-[#F7F1E8]",children:[e.jsx("div",{className:"w-full bg-[#0F1923] py-6 px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"font-serif text-2xl sm:text-3xl text-white tracking-wide",children:"Nepal Travel Intelligence"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Live updates filtered for travelers Â· Powered by OnlineKhabar"})]})}),e.jsx("div",{className:"w-full bg-white/50 backdrop-blur-sm border-b border-black/[0.06]",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-3",children:e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto",children:de.map(s=>e.jsx("button",{onClick:()=>M(s.id),className:`px-4 py-1.5 rounded-full text-sm font-medium transition-all duration-200 whitespace-nowrap ${x===s.id?"bg-[#0F1923] text-white":"text-gray-600 border border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:s.label},s.id))})})}),e.jsx("div",{className:"sticky top-0 z-40 bg-[#F7F1E8]/95 backdrop-blur-sm border-b border-black/[0.06]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-3 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{to:"/",children:e.jsx(m,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-black/[0.06]",children:e.jsx(L,{className:"w-5 h-5 text-[#0F1923]"})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-[#0F1923]/10 flex items-center justify-center",children:e.jsx(R,{className:"w-5 h-5 text-[#0F1923]"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg leading-tight text-[#0F1923]",children:"Insights / News"}),e.jsx("p",{className:"text-xs text-gray-500 leading-none",children:"Live from OnlineKhabar"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[v>0&&e.jsxs(X,{className:"gap-1 bg-red-500 hover:bg-red-600 text-white animate-pulse",children:[e.jsx(V,{className:"w-3 h-3"}),v," Alert",v>1?"s":""]}),E&&e.jsxs("span",{className:"text-xs text-gray-500 hidden sm:block",children:["Updated: ",E]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:U,disabled:a,className:"gap-1.5 h-8 border-gray-300 hover:border-gray-400 hover:bg-gray-50",children:[e.jsx(ee,{className:`w-3.5 h-3.5 ${O?"animate-spin":""}`}),"Refresh"]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[#0F1923]",children:"Latest Updates"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Filtered for travel-relevant news"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 border rounded-full px-3 py-1.5 bg-white shadow-sm",children:[e.jsx(ie,{className:"w-3.5 h-3.5 text-green-500"}),"Verified Source: OnlineKhabar"]})]}),a&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[...Array(6)].map((s,r)=>e.jsxs("div",{className:"bg-white rounded-xl border border-black/[0.08] shadow-[0_2px_12px_rgba(0,0,0,0.06)] overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-[180px] bg-gray-200"}),e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 mt-4"})]})]},r))}),d&&!a&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(N,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Could not load news"}),e.jsx("p",{className:"text-gray-500 mb-6",children:d}),e.jsx(m,{onClick:y,className:"bg-[#0F1923] hover:bg-[#1a2a35]",children:"Try Again"})]}),!a&&!d&&b.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(R,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"No travel news right now"}),e.jsx("p",{className:"text-gray-500",children:"No articles matched the travel keywords at this time. Check back soon!"})]}),!a&&!d&&b.length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:e.jsx(ae,{children:b.map((s,r)=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.07},children:e.jsx(ce,{item:s,onSummarize:H})},s.link))})})]}),e.jsx("div",{id:"ai-panel",className:"w-full lg:w-[360px] flex-shrink-0",children:e.jsxs("div",{className:"sticky top-24",children:[e.jsxs("div",{className:"bg-white border border-black/[0.08] rounded-xl shadow-[0_2px_12px_rgba(0,0,0,0.06)] overflow-hidden flex flex-col h-[560px]",children:[e.jsxs("div",{className:"bg-[#0F1923] p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:e.jsx(re,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-serif text-white text-sm",children:"Nepal News Buddy"}),e.jsx("p",{className:"text-xs text-gray-400",children:"AI-powered travel news assistant"})]}),e.jsx($,{className:"w-4 h-4 ml-auto text-yellow-400 animate-pulse"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[T.map((s,r)=>e.jsxs(g.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:`flex gap-2.5 ${s.role==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center flex-shrink-0 text-xs ${s.role==="user"?"bg-[#E67E22] text-white":"bg-[#FFF4E8] text-[#0F1923]"}`,children:s.role==="user"?"ðŸ‘¤":"ðŸ¤–"}),e.jsx("div",{className:`max-w-[80%] p-3 rounded-xl text-sm whitespace-pre-wrap leading-relaxed ${s.role==="user"?"bg-[#E67E22] text-white rounded-tr-sm":"bg-[#FFF4E8] text-gray-800 rounded-tl-sm"}`,children:s.content.split(`
`).map((l,c)=>e.jsx("span",{className:"block",children:l.includes("ðŸ”´ High Impact")?e.jsx("span",{className:"font-bold text-red-600",children:l}):l.includes("ðŸŸ¡ Moderate Impact")?e.jsx("span",{className:"font-bold text-amber-600",children:l}):l.includes("ðŸŸ¢ Low Impact")?e.jsx("span",{className:"font-bold text-green-600",children:l}):l.replace(/\*\*(.*?)\*\*/g,"$1")},c))})]},r)),p&&e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-2.5",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-[#FFF4E8] flex items-center justify-center",children:"ðŸ¤–"}),e.jsx("div",{className:"bg-[#FFF4E8] p-3 rounded-xl rounded-tl-sm",children:e.jsx(Z,{className:"w-4 h-4 animate-spin text-gray-500"})})]}),e.jsx("div",{ref:A})]}),e.jsxs("div",{className:"p-4 border-t border-gray-100 bg-white",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2 text-center",children:'ðŸ‘† Click "AI Summary" on any article, or ask below'}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:h,onChange:s=>I(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),w(h))},placeholder:"Ask about Nepal travel...",className:"flex-1 text-sm h-9 border-gray-200 focus:border-[#E67E22] focus:ring-[#E67E22]",disabled:p}),e.jsx(m,{onClick:()=>w(h),disabled:!h.trim()||p,size:"icon",className:"h-9 w-9 flex-shrink-0 bg-[#E67E22] hover:bg-[#D35400] text-white transition-all duration-200 hover:shadow-[0_0_12px_rgba(230,126,34,0.4)]",children:e.jsx(le,{className:"w-3.5 h-3.5"})})]})]})]}),e.jsx(C,{to:"/",className:"mt-4 flex items-center justify-center",children:e.jsxs(m,{variant:"outline",className:"w-full gap-2 mt-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50",children:[e.jsx(L,{className:"w-4 h-4"}),"Back to Home"]})})]})})]})}),e.jsx("style",{children:`
                @keyframes gentle-pulse {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.7; }
                }
                .animate-gentle-pulse {
                    animation: gentle-pulse 2s ease-in-out infinite;
                }
            `})]})};export{ke as default};
